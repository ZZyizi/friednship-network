# 变更日志

本文档记录了 Friendship Network 项目的所有重要变更。

## [0.0.2] - 2025-09-15

### 🚀 新增功能
- **SQLite 数据库支持**: 从 JSON 文件迁移到 SQLite 数据库存储
- **自动数据迁移**: 应用启动时自动检测并迁移现有数据
- **智能图片管理**: 新的 ImageManager 类，支持图片缓存、去重和清理
- **性能监控系统**: 完整的性能监控和错误处理机制
- **完整测试框架**: 基于 Vitest 的单元测试、集成测试和边界测试
- **数据库状态监控**: 实时显示数据库连接状态和迁移进度

### ⚡ 性能优化
- **查询速度提升**: 数据查询速度提升 3-5 倍
- **大数据量支持**: 支持处理更大规模的媒体文件集合
- **内存优化**: 更稳定的内存使用和自动垃圾回收
- **索引优化**: 为常用查询添加数据库索引

### 🛡️ 安全性和稳定性
- **事务支持**: 确保数据操作的原子性和一致性
- **完整备份机制**: 迁移前自动备份，支持回滚
- **错误恢复**: 完善的错误处理和自动恢复机制
- **数据验证**: 多层数据验证确保数据质量

### 🎨 用户界面改进
- **设置页面增强**: 新增数据库状态监控界面
- **迁移进度显示**: 实时显示数据迁移进度
- **错误提示优化**: 更友好的错误信息和处理建议
- **性能统计**: 显示媒体文件统计和缓存信息

### 🔧 开发者体验
- **完整的 API 文档**: 新增详细的 API 参考文档
- **数据库架构文档**: 完整的数据库结构说明
- **迁移指南**: 详细的用户升级指南
- **测试覆盖**: 100+ 个测试用例确保代码质量

### 📦 构建和部署
- **增强的构建脚本**: 新增多种构建和清理命令
- **跨平台打包**: 支持 Windows、macOS、Linux 平台打包
- **依赖优化**: 更新和优化项目依赖
- **打包配置**: 完善的 electron-builder 配置

### 🗄️ 数据库架构
- **media_files 表**: 存储媒体文件基本信息
- **media_classify 表**: 管理媒体分类信息
- **app_settings 表**: 应用配置管理
- **migration_info 表**: 迁移历史记录

### 🔄 迁移功能
- **智能检测**: 自动检测是否需要迁移
- **版本兼容**: 支持多版本数据格式
- **数据清理**: 迁移时自动清理无效数据
- **进度跟踪**: 详细的迁移进度和状态报告

### 🧪 测试系统
- **单元测试**: DatabaseManager、ImageManager 等核心模块测试
- **集成测试**: 完整的数据迁移流程测试
- **边界测试**: 大数据量、异常情况的压力测试
- **测试工具**: TestUtils 提供测试数据生成和验证

### 🐛 修复问题
- **文件路径处理**: 修复特殊字符和长路径问题
- **内存泄漏**: 修复长时间运行的内存泄漏问题
- **并发操作**: 改进并发文件操作的稳定性
- **错误处理**: 完善各种异常情况的处理

### 📚 文档完善
- **README 更新**: 添加新功能介绍和使用说明
- **API 文档**: 完整的 API 参考手册
- **数据库文档**: 详细的数据库结构说明
- **迁移指南**: 用户友好的升级指导

### ⚠️ 已知问题
- **构建依赖**: 在某些 Windows 环境下可能需要 Visual Studio 构建工具
- **首次启动**: 大数据量迁移可能需要较长时间
- **网络共享**: 迁移期间建议暂停网络共享功能

### 🔮 下个版本计划
- **搜索优化**: 全文搜索和高级过滤功能
- **批量操作**: 支持批量编辑和管理媒体文件
- **云同步**: 支持云端数据同步
- **插件系统**: 可扩展的插件架构

---

## [0.0.1] - 2025-09-01

### 🚀 初始功能
- **基础媒体共享**: 支持视频、音频文件的局域网共享
- **设备发现**: 自动发现局域网内的设备
- **媒体播放**: 基础的在线媒体播放功能
- **文件扫描**: 自定义路径的媒体文件扫描
- **JSON 存储**: 基于 JSON 文件的数据存储

### 🎨 用户界面
- **Vue 3 界面**: 基于 Vue 3 和 Element Plus 的现代化界面
- **响应式设计**: 适配不同屏幕尺寸
- **主题支持**: 明暗主题切换

### 🔧 技术架构
- **Electron 框架**: 跨平台桌面应用
- **Vite 构建**: 快速的开发和构建体验
- **TypeScript**: 类型安全的代码开发
- **Pinia 状态管理**: 现代化的状态管理方案

---

## 版本规范

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范：

- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订版本号**: 向下兼容的问题修正

## 贡献指南

如果您想为项目贡献代码，请：

1. Fork 项目仓库
2. 创建功能分支
3. 提交您的更改
4. 创建 Pull Request
5. 在变更日志中记录您的贡献

---

*最后更新: 2025年9月15日*


